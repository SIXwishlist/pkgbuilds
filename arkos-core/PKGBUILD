# Maintainer: Jacob Cook <jacob at citizenweb dot io>

pkgname=arkos-core
pkgver=0.8.0
pkgrel=1
pkgdesc="Python system management libraries for arkOS"

arch=('any')
url="https://arkos.io/"
license=('GPLv3')
depends=('binutils' 'python' 'arkos-configs' 'python-ntplib' 'python-nginx' 'python-dbus'
    'python-gobject' 'python-cryptsetup' 'python-pyparted' 'python-pyldap' 'python-psutil'
    'python-netifaces' 'python-gitpython' 'python-gnupg' 'python-pacman' 'python-click'
    'python-requests' 'python-cryptography' 'nginx' 'git' 'python-miniupnpc'
    'python-semantic-version' 'fail2ban' 'supervisor')
makedepends=('python')
provides=('arkos-core')
install='arkos-core.install'
source=("$pkgname-$pkgver.tar.gz"::"https://git.coderouge.co/arkOS/core/repository/archive.tar.gz?ref=$pkgver")
md5sums=('8892d6a290da8223de5d88d89a9d6888')


build() {
  cd "$srcdir"
  tar xvzf "$pkgname-$pkgver.tar.gz"
  cd "core-"*
  python setup.py bdist_wheel
}

package() {
  cd "$srcdir/core-"*
  PIP_CONFIG_FILE=/dev/null pip install --isolated --root="$pkgdir" --ignore-installed --no-deps dist/arkos_core-$pkgver-py3-none-any.whl
}
